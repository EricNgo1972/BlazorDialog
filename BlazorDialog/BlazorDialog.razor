@typeparam TInput
@inject DialogStates states
@inject BlazorDialogService dialogService

@if (Id != null && states.IsShowing.ContainsKey(Id) && states.IsShowing[Id])
{
    if (!IsCustom)
    {
        <div class="blazor-dialog-container">
            <div class="blazor-dialog-content">
                @ChildContent(new DialogContext<TInput>(this.Id, dialogService, (TInput)states.Inputs[Id]))
            </div>
        </div>
    }
    else
    {
        @ChildContent(new DialogContext<TInput>(this.Id, dialogService, (TInput)states.Inputs[Id]))
    }
}

@code{
    [Parameter] protected string Id { get; set; }
    [Parameter] protected RenderFragment<DialogContext<TInput>> ChildContent { get; set; }
    [Parameter] protected bool IsCustom { get; set; }

    protected override void OnInit()
    {
        if (Id == null) throw new ArgumentNullException(nameof(Id));
        states.OnDialogStateChange += StateHasChanged;
    }
}